<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three charts</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js" integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
    <style>
      #map {
        width: 800px;
        height: 580px;
      }
      .legend {
    line-height: 18px;
    color: #555;
}
.legend i {
    width: 18px;
    height: 18px;
    float: left;
    margin-right: 8px;
    opacity: 0.7;
}
    </style>

</head>
<body>
    <h2>Percent Change in Weapons Offenses</h2>
    <div id="map"></div>
    <div id="content"></div>
    <script>
      const map = L.map('map', {
    center: [42.35, -83.0458],
    zoom: 11,
    scrollWheelZoom: false
});;
      var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(map);

      const data = {"type":"FeatureCollection", "features":[
      {"type":"Feature","id":"0","geometry":{"type":"Polygon","coordinates":[[[-83.1571356824725,42.4048084854203],[-83.1585999363856,42.4049942133121],[-83.1598306283249,42.4053325019878],[-83.158977228805,42.3852575504937],[-83.1554378665855,42.3851978335253],[-83.1538747979912,42.3849921413104],[-83.1522578304797,42.384600660717],[-83.1507756102609,42.3840698356742],[-83.1490238954569,42.3831873291073],[-83.147999816033,42.3823977074535],[-83.1472721806529,42.3815748978538],[-83.1465984441898,42.380294213073],[-83.1463828485216,42.3795111908575],[-83.1464816632029,42.3746602169802],[-83.1463558990631,42.3736382129997],[-83.1459247077267,42.3723573663473],[-83.1453767354034,42.3713154148295],[-83.1388100506765,42.368673957099],[-83.1381902131304,42.3555181091479],[-83.1303838533114,42.3446435382918],[-83.1268265247863,42.3444509923105],[-83.1081325837238,42.3447962467542],[-83.1105939676023,42.3483084390123],[-83.1108634621875,42.3552260207234],[-83.1108544790347,42.3558832177694],[-83.1106837991307,42.3563080687679],[-83.1092914104403,42.356971892703],[-83.1008562299224,42.3601050470176],[-83.0986463743235,42.3607754686456],[-83.0818029627463,42.3672071700424],[-83.0859801288174,42.373664758768],[-83.0863664043896,42.3740629439463],[-83.0902291601113,42.37972353683],[-83.0817400806764,42.382822379157],[-83.0889535524078,42.3935377533779],[-83.1025989615736,42.3885618008801],[-83.105913744972,42.393106519774],[-83.1071354537584,42.3957469498289],[-83.1133158629132,42.4046824554663],[-83.1154628364422,42.4037538058943],[-83.1172684501633,42.4028185092175],[-83.118867451369,42.4038068719544],[-83.1206550987844,42.4045431589068],[-83.1223798641299,42.4049942133121],[-83.1242842925323,42.4052263724036],[-83.1437328184334,42.4049013494349],[-83.1571356824725,42.4048084854203]]]},"properties":{"FID":1,"altmode":0,"assaults_pct_change":200,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"10","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00295751811,"shape_leng":0.26116884224,"snippet":" ","symbolid":0,"weapons_pct_change":-11.641791044776118}},
      {"type":"Feature","id":"1","geometry":{"type":"Polygon","coordinates":[[[-82.9409291598906,42.4494867210097],[-82.9395996532701,42.4508455329731],[-82.9674564102307,42.4504677199224],[-82.9708430588518,42.4502290999793],[-83.0046825956046,42.4494867210097],[-83.0108989373707,42.4413730059101],[-83.0113750444713,42.4399609530457],[-83.0116355559037,42.439596333287],[-83.0146628784111,42.4366196308035],[-83.0139981251009,42.4200628726448],[-83.0137196473628,42.4196915055448],[-83.0194598820284,42.4195655054933],[-83.0191544548317,42.419399715566],[-83.0144742322015,42.414551824297],[-83.0085004355621,42.4082841591128],[-83.0084285703394,42.4080387457242],[-83.0088328122172,42.4076208774749],[-83.0150401708305,42.4052462717143],[-83.0183819036874,42.4051268757553],[-83.0182741058533,42.4024006061956],[-83.0177620661414,42.4009213398014],[-83.0015295089573,42.401445388836],[-83.0004605137692,42.4003906527743],[-82.9975050564845,42.4049146157115],[-82.9947382454094,42.402692475266],[-82.990857523382,42.3986128185299],[-82.9893214042461,42.3971865344945],[-82.9877673188046,42.3966425478575],[-82.9859617050835,42.3977570519989],[-82.9841201587511,42.3985332128333],[-82.976996518548,42.4006360960823],[-82.9649231611295,42.4036145072729],[-82.955841193607,42.4064136868961],[-82.9515472465489,42.4075678146408],[-82.9503165546097,42.4080586441428],[-82.9491038289761,42.408721921152],[-82.9389169336542,42.416282783349],[-82.9372281009201,42.4173438840506],[-82.9343624751637,42.4188426581998],[-82.9330060190847,42.419784347526],[-82.9312543042807,42.4214422169026],[-82.9274634137817,42.426335991604],[-82.9512238530466,42.4359897981227],[-82.9449086965993,42.4444157722183],[-82.9409291598906,42.4494867210097]]]},"properties":{"FID":2,"altmode":0,"assaults_pct_change":-31.57894736842105,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"09","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00342040559,"shape_leng":0.28466864237,"snippet":" ","symbolid":0,"weapons_pct_change":21.073825503355707}},
      {"type":"Feature","id":"2","geometry":{"type":"Polygon","coordinates":[[[-83.199024124171,42.4087617175495],[-83.2003985465557,42.4425331194271],[-83.2033899364518,42.4447604771651],[-83.2879663204517,42.4426855898923],[-83.287723775325,42.4421088518323],[-83.2873464829056,42.4286169701507],[-83.2864661339272,42.4070106521737],[-83.2759468619502,42.4072892340259],[-83.275731266282,42.4001054066427],[-83.2737909052683,42.4001120402884],[-83.2721200388398,42.399966099921],[-83.2692184804721,42.4002115448897],[-83.2564174876734,42.4003044157085],[-83.2374271025671,42.4006758976093],[-83.2368521807853,42.3862594600478],[-83.1981707246511,42.3870623031832],[-83.199024124171,42.4087617175495]]]},"properties":{"FID":3,"altmode":0,"assaults_pct_change":14.285714285714285,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"08","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00425278438,"shape_leng":0.28877717355,"snippet":" ","symbolid":0,"weapons_pct_change":-8.87728459530026}},
      {"type":"Feature","id":"3","geometry":{"type":"Polygon","coordinates":[[[-83.1792162721562,42.4039063706962],[-83.1798091602437,42.4166011154447],[-83.1895558810764,42.4164684772679],[-83.1993205682148,42.4159909775084],[-83.1979641121357,42.3828754629179],[-83.1981976741096,42.3816014402673],[-83.1979910615943,42.3782503718557],[-83.1977125838562,42.376578088651],[-83.1970657968516,42.3592952212549],[-83.1965717234454,42.3506121712179],[-83.1902924996094,42.3506520044616],[-83.1476764225307,42.3516146335077],[-83.1475865910023,42.3499615579977],[-83.1484310073694,42.3446966543208],[-83.1358006944747,42.344968873265],[-83.1303838533114,42.3446435382918],[-83.1381902131304,42.3555181091479],[-83.1388100506765,42.368673957099],[-83.1453767354034,42.3713154148295],[-83.1459247077267,42.3723573663473],[-83.1463558990631,42.3736382129997],[-83.1464816632029,42.3746602169802],[-83.1463828485216,42.3795111908575],[-83.1465984441898,42.380294213073],[-83.1472721806529,42.3815748978538],[-83.147999816033,42.3823977074535],[-83.1490238954569,42.3831873291073],[-83.1507756102609,42.3840698356742],[-83.1522578304797,42.384600660717],[-83.1538747979912,42.3849921413104],[-83.1554378665855,42.3851978335253],[-83.158977228805,42.3852575504937],[-83.1596958810322,42.4025200073431],[-83.1791354237806,42.4020888354616],[-83.1792162721562,42.4039063706962]]]},"properties":{"FID":4,"altmode":0,"assaults_pct_change":-30,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"02","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00292669347,"shape_leng":0.26727391483,"snippet":" ","symbolid":0,"weapons_pct_change":-43.51464435146444}},
      {"type":"Feature","id":"4","geometry":{"type":"Polygon","coordinates":[[[-83.073843889329,42.3987322268855],[-83.0797368375928,42.3964899653929],[-83.0800512479422,42.397007417464],[-83.0802578604576,42.3968216659294],[-83.0889535524078,42.3935377533779],[-83.0817400806764,42.382822379157],[-83.0902291601113,42.37972353683],[-83.0863664043896,42.3740629439463],[-83.0859801288174,42.373664758768],[-83.0818029627463,42.3672071700424],[-83.0898069519278,42.3641872064939],[-83.0910286607142,42.3636163838839],[-83.0986463743235,42.3607754686456],[-83.1024013322111,42.3595341873196],[-83.110495152921,42.3564341958552],[-83.1108005801176,42.3561354733962],[-83.1108634621875,42.3557902812306],[-83.110611933908,42.348408025724],[-83.1104053213926,42.3478901731006],[-83.1061203574874,42.3420009591973],[-83.1056083177754,42.3415295326593],[-83.1025360795037,42.3372732541897],[-83.1017814946651,42.336403370872],[-83.1005687690315,42.3345639596548],[-83.1028325235475,42.3313033548629],[-83.096804827991,42.331276791197],[-83.0938224212478,42.3314295321231],[-83.0869592924771,42.3314627366232],[-83.0864652190708,42.3302407994733],[-83.0859801288174,42.3281886885707],[-83.0839140036639,42.3284078492388],[-83.0805093887371,42.3280957110869],[-83.0767903634609,42.3273186795989],[-83.0744996594864,42.326508431415],[-83.073502529521,42.3260368887336],[-83.0705291059305,42.3207832657401],[-83.0686875595981,42.3180400493248],[-83.0666843165145,42.3192090859551],[-83.0583479506779,42.3227758419027],[-83.0515836365885,42.3240975492785],[-83.0319195150191,42.3296298219964],[-83.0327279987748,42.3309845901307],[-83.0346773429414,42.330068132527],[-83.0358182033522,42.3316818858842],[-83.0360697316317,42.3317881397964],[-83.0358990517277,42.3326182423071],[-83.0360607484789,42.3331959871883],[-83.0399863862705,42.3389864243168],[-83.0421782755637,42.340832346089],[-83.0427981131098,42.3414764139546],[-83.0435077821842,42.342525500064],[-83.044199484953,42.3452942065547],[-83.0445677942195,42.3460842946777],[-83.0517632996453,42.3571179330277],[-83.0519609290078,42.3577950246441],[-83.0538294247988,42.3609878779663],[-83.0542426498295,42.3608418466355],[-83.0543684139692,42.3610144290809],[-83.0559045331051,42.3639814454532],[-83.0589588050711,42.3707380202396],[-83.0595966089228,42.3734457558439],[-83.0600278002592,42.3745142174298],[-83.059758305674,42.3746867623166],[-83.0590935523637,42.375569388361],[-83.0567758989307,42.3764652742917],[-83.0575394669222,42.3775403205382],[-83.0576921805205,42.377493868303],[-83.0577640457432,42.377586772739],[-83.0571801408085,42.3778057612228],[-83.0569106462233,42.3777659451916],[-83.0573687870182,42.3789006921863],[-83.0556889374369,42.3811502177125],[-83.0624891841377,42.3912488642232],[-83.0664597376935,42.3897693349348],[-83.0677443285498,42.3917331868619],[-83.068804340585,42.3927150897837],[-83.073843889329,42.3987322268855]]]},"properties":{"FID":5,"altmode":0,"assaults_pct_change":25,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"03","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00312302585,"shape_leng":0.28841922981,"snippet":" ","symbolid":0,"weapons_pct_change":-6.372549019607843}},
      {"type":"Feature","id":"5","geometry":{"type":"Polygon","coordinates":[[[-83.1270421204545,42.3444576318369],[-83.1358006944747,42.344968873265],[-83.1484310073694,42.3446966543208],[-83.1492035585137,42.3410780222387],[-83.1497515308371,42.3400289119778],[-83.1508205260251,42.3387938610106],[-83.1524285103837,42.3378044747254],[-83.15371310124,42.3373396570021],[-83.1551144730832,42.337060764719],[-83.1571356824725,42.3369545197143],[-83.1568392384288,42.3271327219221],[-83.1532100446809,42.3280957110869],[-83.1407863443015,42.311018730407],[-83.1404899002578,42.3100953387987],[-83.1397173491134,42.3086670445225],[-83.1398790458646,42.308328235078],[-83.1404270181879,42.3080492141663],[-83.1407234622316,42.3076705409508],[-83.140588714939,42.3068533962508],[-83.1406875296203,42.3066873086326],[-83.1422416150618,42.3061093203056],[-83.1424841601885,42.3058568639689],[-83.1424392444243,42.3052589370278],[-83.1419541541709,42.304082997477],[-83.1416577101271,42.3021828453431],[-83.1407773611487,42.300349077721],[-83.1404090518822,42.2990600931544],[-83.140534816022,42.2977577932915],[-83.140930074747,42.2965152678059],[-83.1415678785987,42.2954654143305],[-83.1426458569397,42.2944155433533],[-83.1437777341977,42.2943889641141],[-83.1440112961715,42.2942029091254],[-83.1440023130187,42.2937975731398],[-83.1473260795699,42.2925749045287],[-83.1478471024347,42.2925682595258],[-83.1488891481643,42.2933722997933],[-83.1497694971427,42.2955717294029],[-83.1503354357717,42.2960102771795],[-83.1508384923308,42.2962162606872],[-83.1518176559905,42.2961830375864],[-83.1538568316855,42.2954654143305],[-83.1545844670656,42.2953524543694],[-83.1556534622537,42.295379033202],[-83.1561565188128,42.2951265338394],[-83.1574051770578,42.2930201181295],[-83.1578094189356,42.2926812244806],[-83.157899250464,42.2933789447114],[-83.1585190880101,42.292787544253],[-83.159255706543,42.2924154242643],[-83.1643581373568,42.2910398902226],[-83.1642683058284,42.2905880174123],[-83.1672776620302,42.2896045183253],[-83.1667566391654,42.2886276493015],[-83.1647174634705,42.2866738658063],[-83.1629567655136,42.2823739996013],[-83.1585280711629,42.2784792770975],[-83.1611691180982,42.2749831266186],[-83.1609355561243,42.2749299517299],[-83.1618698040198,42.2736072119342],[-83.1648971265273,42.2700243752709],[-83.1663973130518,42.2680301293498],[-83.1678346175064,42.2663150273973],[-83.1694246355593,42.2649189797324],[-83.1696761638388,42.2648591484273],[-83.1700893888695,42.2643804959428],[-83.168930562153,42.2641877043321],[-83.1682568256899,42.2637888232659],[-83.1669722348336,42.2612824628218],[-83.166891386458,42.2599261944075],[-83.1658044249643,42.2587028684621],[-83.1635676199068,42.2573199496849],[-83.1611870844039,42.2546670542586],[-83.1514313804183,42.2664479827054],[-83.137534442973,42.2827993472042],[-83.1363666331037,42.2824005839106],[-83.1357467955576,42.2825999658729],[-83.1355132335838,42.2830585419917],[-83.1340579628235,42.28279270117],[-83.1317582756961,42.2820549870146],[-83.1313360675126,42.2817957880986],[-83.1287668858,42.2812308636898],[-83.1286411216602,42.2811843402775],[-83.128712986883,42.2810115387309],[-83.1284434922977,42.280898552848],[-83.1282907786994,42.2810314773951],[-83.1272487329699,42.2809317840111],[-83.1254970181658,42.2807058117567],[-83.1248592143141,42.2804532535723],[-83.1229907185231,42.28021398699],[-83.122263083143,42.2803136815097],[-83.121077306968,42.2800145974775],[-83.120340688435,42.2799680731671],[-83.1200981433083,42.279815207334],[-83.1187506703821,42.2800677680758],[-83.1184901589497,42.2803668518557],[-83.1184991421025,42.2808786141418],[-83.1188944008275,42.2822078474139],[-83.1193884742338,42.2828990376333],[-83.1202957726708,42.2871589945742],[-83.1202867895179,42.2878368394723],[-83.1199544128628,42.2886475855555],[-83.1194962720679,42.2892722516499],[-83.1177086246525,42.2902424654289],[-83.1152562239269,42.2903953059631],[-83.1112856703711,42.2897440698063],[-83.1115641481091,42.2900763339929],[-83.1094890398028,42.2896975526803],[-83.1093273430517,42.2893852225162],[-83.1030481192157,42.288428286415],[-83.1026169278793,42.2894250945383],[-83.0993919760093,42.2924619393832],[-83.0992212961053,42.2924021342241],[-83.0982331492928,42.2933390751922],[-83.0986284080178,42.2936314510806],[-83.0985745091008,42.2940833020567],[-83.0978917894848,42.2937577038856],[-83.0848931673236,42.306640804021],[-83.0825036486679,42.3093911605547],[-83.0815783839252,42.3102680605611],[-83.0805004055843,42.311018730407],[-83.0784702130422,42.3128123300706],[-83.0756405198972,42.3143600990654],[-83.0714004717561,42.3158546896519],[-83.0686875595981,42.3180400493248],[-83.0705291059305,42.3207832657401],[-83.0735115126738,42.3260302472621],[-83.074517625792,42.3265017899933],[-83.0768083297666,42.3272987555884],[-83.08051837189,42.328082428578],[-83.0839229868168,42.3283945667958],[-83.0859891119703,42.3281820473264],[-83.0864831853765,42.3302407994733],[-83.0869682756299,42.3314560957246],[-83.0938224212478,42.3314295321231],[-83.096804827991,42.331276791197],[-83.1028325235475,42.3313033548629],[-83.1005687690315,42.3345639596548],[-83.1017814946651,42.336403370872],[-83.1081325837238,42.3447962467542],[-83.1270421204545,42.3444576318369]]]},"properties":{"FID":6,"altmode":0,"assaults_pct_change":0,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"04","oid_":0,"popupinfo":"\n\n\n\n\n\n\n\n\n\n","shape_area":0.00405841437,"shape_leng":0.37578228847,"snippet":" ","symbolid":0,"weapons_pct_change":38.72340425531915}},
      {"type":"Feature","id":"6","geometry":{"type":"Polygon","coordinates":[[[-82.9151924270006,42.4211172779587],[-82.927050188751,42.4258983525095],[-82.9274364643232,42.426335991604],[-82.9312543042807,42.4214422169026],[-82.9330060190847,42.419784347526],[-82.9343624751637,42.4188426581998],[-82.9372281009201,42.4173438840506],[-82.9389169336542,42.416282783349],[-82.9484390756659,42.4091663128245],[-82.9501009589415,42.4081647689356],[-82.9519155558154,42.4074484231002],[-82.955841193607,42.4064136868961],[-82.9649231611295,42.4036145072729],[-82.976996518548,42.4006360960823],[-82.9841201587511,42.3985332128333],[-82.9859617050835,42.3977570519989],[-82.9877673188046,42.396635913845],[-82.989330387399,42.3971865344945],[-82.9908485402291,42.3985929171152],[-82.9947382454094,42.4026858418931],[-82.9975050564845,42.4049146157115],[-83.0030027460233,42.3967287899559],[-83.0062815968103,42.3915474197163],[-83.0032363079972,42.3920118365495],[-82.9908485402291,42.3735585756274],[-82.9887554656171,42.3705521909667],[-82.9858988230137,42.3669217731055],[-82.9817665727067,42.3610210668578],[-82.980446049239,42.3620631891328],[-82.9788919637975,42.3630654687725],[-82.9735200383985,42.3553189580966],[-82.9727295209485,42.3555579392824],[-82.9739063139707,42.3569652544984],[-82.9724779926689,42.3571179330277],[-82.97184917197,42.3569586162931],[-82.9718132393587,42.3574631179006],[-82.9703579685984,42.3570117219162],[-82.9695405016898,42.3554251720691],[-82.9608987086566,42.3547679702331],[-82.9590930949355,42.3547215011562],[-82.9571527339218,42.3548874619872],[-82.9590571623242,42.3581070153845],[-82.9583474932497,42.3580937392143],[-82.9560837387337,42.3544360475018],[-82.9529216689336,42.3548741851368],[-82.9482414463034,42.3552791278106],[-82.9433456280049,42.3559429626146],[-82.9357458807012,42.3566665345638],[-82.9311105738352,42.3574963086538],[-82.9285952910397,42.3583127956634],[-82.9309488770841,42.361910522619],[-82.9303559889965,42.3621494787374],[-82.9387642200559,42.3747531256083],[-82.9388540515843,42.375164576452],[-82.9393571081434,42.3759476528684],[-82.9396894847985,42.3759941062473],[-82.9425730768606,42.380400384825],[-82.9424203632623,42.3804667420789],[-82.9423574811924,42.3807587131627],[-82.9425820600134,42.3811170394555],[-82.9430042681969,42.3810440472284],[-82.9469658385999,42.3871817335161],[-82.9404261033315,42.3883229452383],[-82.9359255437581,42.389291631932],[-82.9216962296576,42.3949176809988],[-82.9211302910286,42.3953688046015],[-82.918453311482,42.3990970843418],[-82.9135485100307,42.4090071281097],[-82.911320688126,42.4140079882184],[-82.9102786423965,42.4168597590826],[-82.9100720298811,42.4192339252005],[-82.9151924270006,42.4211172779587]]]},"properties":{"FID":7,"altmode":0,"assaults_pct_change":100,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"05","oid_":0,"popupinfo":" ","shape_area":0.0033931922,"shape_leng":0.31753318174,"snippet":" ","symbolid":0,"weapons_pct_change":-7.989690721649484}},
      {"type":"Feature","id":"7","geometry":{"type":"Polygon","coordinates":[[[-83.1962932457073,42.3436741628798],[-83.1970657968516,42.3592952212549],[-83.1977125838562,42.376578088651],[-83.1979910615943,42.3782503718557],[-83.1981976741096,42.3816014402673],[-83.1979641121357,42.3828754629179],[-83.1981707246511,42.3870623031832],[-83.2368521807853,42.3862594600478],[-83.2374271025671,42.4006758976093],[-83.2564174876734,42.4003044157085],[-83.2692184804721,42.4002115448897],[-83.2721200388398,42.399966099921],[-83.2737909052683,42.4001120402884],[-83.275731266282,42.4001054066427],[-83.2751922771115,42.3848793420678],[-83.2753000749456,42.3848793420678],[-83.2752641423342,42.3833797564087],[-83.2751383781944,42.3833863918224],[-83.274994647749,42.3785290813935],[-83.2753180412513,42.3785158095388],[-83.2753090580984,42.3784361783517],[-83.2666672650652,42.3786153483807],[-83.2659935286021,42.357051551104],[-83.265661151947,42.3570648274944],[-83.2643945273964,42.3433289022741],[-83.2639902855185,42.3421603138474],[-83.2641609654225,42.341423295205],[-83.2644574094663,42.3410448228151],[-83.2631907849157,42.3417220875878],[-83.253839322808,42.3418814429447],[-83.2437242927088,42.3429570810398],[-83.2378493107507,42.3430965142603],[-83.2375708330126,42.3357459701529],[-83.2351094491341,42.3358389363284],[-83.2349836849943,42.3298356955048],[-83.234660291492,42.3298489776435],[-83.2324504358931,42.330878334861],[-83.2300878666959,42.331808062385],[-83.2277073311929,42.3323858147084],[-83.2256142565809,42.3293774600023],[-83.2248147559781,42.3286469327332],[-83.2153554960363,42.3289524269869],[-83.2153914286477,42.3360115874325],[-83.1960327342749,42.3362971247567],[-83.1962932457073,42.3436741628798]]]},"properties":{"FID":8,"altmode":0,"assaults_pct_change":-23.07692307692308,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"06","oid_":0,"popupinfo":" ","shape_area":0.00402120508,"shape_leng":0.30258269909,"snippet":" ","symbolid":0,"weapons_pct_change":-7.358490566037735}},
      {"type":"Feature","id":"8","geometry":{"type":"Polygon","coordinates":[[[-83.1018174272764,42.4177550557457],[-83.094828534366,42.4179341135444],[-83.0940110674574,42.417801478187],[-83.0892499964516,42.4179075864954],[-83.0761705259148,42.4017505292955],[-83.0571352250443,42.4087285538867],[-83.0538204416459,42.4037339061102],[-83.0524639855669,42.4042579316533],[-83.0502002310509,42.4044370279872],[-83.0425376016774,42.404450294362],[-83.0423040397035,42.3905787678348],[-83.0373363561823,42.3906981914774],[-83.0373453393352,42.3903598238999],[-83.0225231371472,42.390459343965],[-83.0230082274006,42.4009611411475],[-83.0213104115136,42.4008550041685],[-83.0177620661414,42.4009213398014],[-83.0182741058533,42.4024006061956],[-83.0183819036874,42.4051268757553],[-83.0150401708305,42.4052462717143],[-83.0088328122172,42.4076208774749],[-83.0084285703394,42.4080387457242],[-83.0085004355621,42.4082841591128],[-83.0144742322015,42.414551824297],[-83.0191544548317,42.419399715566],[-83.0194598820284,42.4195655054933],[-83.0137196473628,42.4196915055448],[-83.0139981251009,42.4200628726448],[-83.0146628784111,42.4366196308035],[-83.0116355559037,42.439596333287],[-83.0113750444713,42.4399609530457],[-83.0108989373707,42.4413730059101],[-83.0046915787574,42.4494867210097],[-83.0639085222866,42.448035079566],[-83.0834109471048,42.4478494791477],[-83.1029043887702,42.4474517621139],[-83.1018174272764,42.4177550557457]]]},"properties":{"FID":9,"altmode":0,"assaults_pct_change":11.11111111111111,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"11","oid_":0,"popupinfo":" ","shape_area":0.00395415026,"shape_leng":0.31920700371,"snippet":" ","symbolid":0,"weapons_pct_change":-14.355231143552311}},
      {"type":"Feature","id":"9","geometry":{"type":"Polygon","coordinates":[[[-83.1028415067003,42.4463381409854],[-83.1029133719231,42.4474451334752],[-83.1967873191135,42.4454565102188],[-83.203776212024,42.4451118091016],[-83.2003985465557,42.4425331194271],[-83.1993205682148,42.4159909775084],[-83.1895558810764,42.4164684772679],[-83.1798091602437,42.4166011154447],[-83.1791354237806,42.4020888354616],[-83.1596958810322,42.4025200073431],[-83.1598306283249,42.4053325019878],[-83.1579800988396,42.4048814500148],[-83.1564170302452,42.4047952191213],[-83.124014797947,42.4052064730865],[-83.1223798641299,42.4049942133121],[-83.1197927161117,42.4042446652378],[-83.1172684501633,42.4028185092175],[-83.1154628364422,42.4037538058943],[-83.1133158629132,42.4046824554663],[-83.121867824418,42.4173836749776],[-83.1018174272764,42.4177550557457],[-83.1028415067003,42.4463381409854]]]},"properties":{"FID":10,"altmode":0,"assaults_pct_change":-18.181818181818183,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"12","oid_":0,"popupinfo":" ","shape_area":0.00368076755,"shape_leng":0.30061790509,"snippet":" ","symbolid":0,"weapons_pct_change":-4.1551246537396125}},
      {"type":"Feature","id":"10","geometry":{"type":"Polygon","coordinates":[[[-83.0015295089573,42.401445388836],[-83.0176273188488,42.4009213398014],[-83.0213104115136,42.4008550041685],[-83.0230082274006,42.4009611411475],[-83.0225231371472,42.390459343965],[-83.0373453393352,42.3903598238999],[-83.0373363561823,42.3906981914774],[-83.0446396594422,42.3905256905874],[-83.0433999843501,42.3888404646468],[-83.0422950565507,42.3868433469827],[-83.0414596233365,42.3859409739761],[-83.0406780890393,42.384693554638],[-83.0547546895414,42.3796040923088],[-83.0556889374369,42.3811502177125],[-83.0573687870182,42.3789006921863],[-83.0569106462233,42.3777659451916],[-83.0571801408085,42.3778057612228],[-83.0577640457432,42.377586772739],[-83.0576921805205,42.377493868303],[-83.0575394669222,42.3775403205382],[-83.0567758989307,42.3764652742917],[-83.0590935523637,42.375569388361],[-83.059758305674,42.3746867623166],[-83.0600278002592,42.3745142174298],[-83.0595966089228,42.3734457558439],[-83.0589588050711,42.3707380202396],[-83.0559045331051,42.3639814454532],[-83.0543684139692,42.3610144290809],[-83.0542426498295,42.3608418466355],[-83.0538294247988,42.3609878779663],[-83.0519609290078,42.3577950246441],[-83.0517632996453,42.3571179330277],[-83.0445498279138,42.3460842946777],[-83.0441905018002,42.3452942065547],[-83.0434987990314,42.3425321397937],[-83.0421872587166,42.3408655456248],[-83.0399684199648,42.3390063446251],[-83.036051765326,42.3332225500438],[-83.0358721022692,42.3326315238582],[-83.0360427821732,42.33179478066],[-83.0358092201993,42.3317018085064],[-83.0346683597885,42.3300880556604],[-83.0327279987748,42.3309912310791],[-83.0319015487134,42.3296364630878],[-83.026664370607,42.3314893002107],[-83.0266374211485,42.3319143160841],[-83.0269338651922,42.3327377761662],[-83.0266374211485,42.3327909022529],[-83.0261972466593,42.331695167633],[-83.0215260071818,42.3334084897177],[-83.01693561608,42.3352678562226],[-83.0141328723935,42.3364166516238],[-83.01127622979,42.3377911942667],[-83.0110157183576,42.3381298450874],[-83.0092370540951,42.3390528253201],[-83.0089046774399,42.33937154916],[-83.0074044909155,42.3400355519712],[-83.0063354957274,42.3407393872955],[-83.005509045666,42.3411112216448],[-83.0004245811579,42.3450950231078],[-82.9970918314538,42.3468544550554],[-82.9923307604479,42.3496760827243],[-82.9922049963082,42.3494769131611],[-82.9915402429979,42.3498155010431],[-82.9913965125525,42.3502271152275],[-82.9898693765695,42.3511233625952],[-82.9873540937739,42.3517938800467],[-82.9850454234937,42.3521922038587],[-82.9868600203677,42.3549140156795],[-82.9862491659745,42.3551198064142],[-82.9842549060437,42.3525374157873],[-82.9837608326374,42.35242455825],[-82.9798172285402,42.353413714475],[-82.9735200383985,42.3553189580966],[-82.9788919637975,42.3630654687725],[-82.980446049239,42.3620631891328],[-82.9817665727067,42.3610210668578],[-82.9858988230137,42.3669217731055],[-82.9887554656171,42.3705521909667],[-82.9908485402291,42.3735585756274],[-83.0032363079972,42.3920118365495],[-83.0062815968103,42.3915474197163],[-83.0030027460233,42.3967287899559],[-83.0004605137692,42.4003906527743],[-83.0015295089573,42.401445388836]]]},"properties":{"FID":11,"altmode":0,"assaults_pct_change":33.33333333333333,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"07","oid_":0,"popupinfo":" ","shape_area":0.00342544372,"shape_leng":0.28440172209,"snippet":" ","symbolid":0,"weapons_pct_change":-16.304347826086957}},
      {"type":"Feature","id":"11","geometry":{"type":"Polygon","coordinates":[[[-82.9682828602921,42.3515349682152],[-82.9698279625808,42.3521191780155],[-82.9709239072274,42.3519266549312],[-82.9706274631836,42.3504461990975],[-82.9712473007297,42.3487798147202],[-82.9724869758217,42.3485474468553],[-82.9719479866513,42.3497889451967],[-82.9714808627035,42.3515017743135],[-82.9723791779876,42.3519399324042],[-82.9730798639093,42.3505457824224],[-82.9766910913514,42.3479233689095],[-82.9765204114474,42.3475914100311],[-82.9761071864167,42.3474187907215],[-82.9788111154219,42.344431073727],[-82.986895952979,42.3420341581161],[-82.987407992691,42.3417287274024],[-82.9895908988314,42.3416224902846],[-82.9896897135126,42.3413170575712],[-82.9936423007628,42.3398031517849],[-82.9966696232703,42.3400820319054],[-82.9976757363884,42.3396105909798],[-82.9985021864498,42.3391723469494],[-83.0000023729743,42.337963840011],[-83.0004694969221,42.3372134915987],[-83.0050149722597,42.3330897356544],[-83.0047364945216,42.3329901246783],[-83.0024817231585,42.3330100468862],[-82.9891417411893,42.3333885676361],[-82.9877673188046,42.3338002893739],[-82.9874888410666,42.3341522429162],[-82.9858898398608,42.3346303653279],[-82.986051536612,42.3342651332579],[-82.9851801707864,42.334577240795],[-82.9852700023148,42.3347631764639],[-82.9843177881136,42.334982314225],[-82.9837608326374,42.3348096602952],[-82.9814521623573,42.3351948107187],[-82.9792782393697,42.3355998801709],[-82.9756759950804,42.3365693800678],[-82.975244803744,42.3368681955159],[-82.97349308894,42.3376185480483],[-82.9615724451197,42.3398363518641],[-82.9608268434339,42.3400554719472],[-82.9595871683418,42.3406796279986],[-82.9588236003503,42.3415228928237],[-82.9580330829003,42.3417353672163],[-82.9562723849434,42.3435944875237],[-82.9536133717024,42.3470204366596],[-82.9536852369251,42.3482420477836],[-82.9541074451087,42.3482486869096],[-82.954879996253,42.3479963996275],[-82.9558861093712,42.3470005188902],[-82.9571168013105,42.3465424084531],[-82.9581498638872,42.3453738797568],[-82.9585181731537,42.3447431308093],[-82.9590481791713,42.3445041085022],[-82.9607280287526,42.3446501777979],[-82.9607909108225,42.343972944566],[-82.9601531069708,42.3418150449284],[-82.9601620901236,42.3413104177131],[-82.960539382543,42.3409784239153],[-82.9618509228578,42.3404605100905],[-82.9632163620896,42.3403277109868],[-82.9638541659414,42.3399757920053],[-82.9646806160027,42.3398828319455],[-82.9685074391131,42.3398961119625],[-82.966701825392,42.3405800290441],[-82.9662077519857,42.3406663481471],[-82.9657675774965,42.3405601092343],[-82.9645368855573,42.3410979418845],[-82.9631265305612,42.3414432147414],[-82.9624258446396,42.341775206085],[-82.9621653332072,42.3425454192511],[-82.9615095630498,42.3434284968741],[-82.9611502369361,42.3435878479061],[-82.9609526075737,42.3446568173032],[-82.9606381972242,42.3447896072635],[-82.9606471803771,42.3451083020239],[-82.9618509228578,42.3466154407755],[-82.9616892261066,42.3470137974038],[-82.9608627760452,42.3478636164408],[-82.9599824270668,42.3481623782165],[-82.9557693283843,42.3484412212595],[-82.9555986484803,42.3485474468553],[-82.9551135582269,42.3484876949797],[-82.9548081310303,42.3488063709929],[-82.955104575074,42.3489524302924],[-82.9560927218866,42.3487466193635],[-82.9637104354959,42.3495499420742],[-82.9646267170857,42.3495499420742],[-82.9652914703959,42.3498420568782],[-82.9655968975925,42.3501673649486],[-82.9647255317669,42.3499814748288],[-82.9646626496971,42.3497756672692],[-82.9643123067363,42.3497291945013],[-82.9561196713451,42.3490984892524],[-82.9553022044365,42.3492511868933],[-82.9547182995019,42.3494968301458],[-82.9544218554581,42.3498022231213],[-82.9545116869865,42.3498553347916],[-82.9555178001047,42.3494105231665],[-82.9562903512491,42.3492379088523],[-82.9646716328499,42.3500013916537],[-82.9648243464482,42.3504661157751],[-82.96460875078,42.3508511703014],[-82.9648602790596,42.3512694165108],[-82.9642943404306,42.352178926439],[-82.9656597796624,42.3522187586898],[-82.9673216629381,42.3519930422683],[-82.9682828602921,42.3515349682152],[-82.9682828602921,42.3513955537103],[-82.9681481129994,42.3515150518763],[-82.9673845450079,42.351594717194],[-82.968228961375,42.3514088312955],[-82.9687499842398,42.3507316708733],[-82.968794900004,42.3502868654496],[-82.9689565967552,42.3501474481764],[-82.9686781190171,42.3495698590358],[-82.9658214764136,42.3490320988581],[-82.9652824872431,42.3485275295697],[-82.9645997676272,42.3483349954842],[-82.9655609649812,42.3480760694049],[-82.967492342842,42.3481490999455],[-82.968175062458,42.3480627911157],[-82.9685972706415,42.3479366472282],[-82.9694237207029,42.3473789554289],[-82.9718042562058,42.3468478157821],[-82.9719839192626,42.3469739618546],[-82.9726756220314,42.3469540440705],[-82.9737356340667,42.3464162615147],[-82.9754603994122,42.3462635569874],[-82.9766192261287,42.3464560974174],[-82.9752627700497,42.3471067469205],[-82.9742566569315,42.3474519867794],[-82.9736278362326,42.3476179668059],[-82.9714988290092,42.3476046884199],[-82.970492715891,42.3480893476914],[-82.9699896593319,42.3485872814074],[-82.9692260913404,42.3490852111792],[-82.9690015125194,42.3497424724385],[-82.9697201647466,42.3502536708888],[-82.9694506701614,42.3504793935567],[-82.969190158729,42.3504860324464],[-82.9682828602921,42.3515349682152]]]},"properties":{"FID":12,"altmode":0,"assaults_pct_change":33.33333333333333,"base":0,"clamped":-1,"extruded":0,"folderpath":"2015 New Precincts Overlay/2015 Precincts","name":"07","oid_":0,"popupinfo":" ","shape_area":0.00038654225,"shape_leng":0.22355097024,"snippet":" ","symbolid":0,"weapons_pct_change":-16.304347826086957}}
      ]}

function getColor(d) { //Choose color for chloropleth based on value
      return d < -30 ? '#8c510a' :
            d < -20  ? '#bf812d' :
            d < -10  ? '#dfc27d' :
            d < 0  ? '#f6e8c3' :
            d < 10   ? '#c7eae5' :
            d < 20   ? '#80cdc1' :
            d < 30   ? '#35978f' :
                      '#FFEDA0';
      }
function style(feature) { //using value of feature, return a color for choropleth
    return {
        fillColor: getColor(feature.properties.weapons_pct_change),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}

L.geoJson(data, {style: style}).addTo(map);

var legend = L.control({position: 'bottomright'});

legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend'),
        grades = [-40, -30, -20, -10, 10, 20, 30, 40],
        labels = [];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i] + 1) +   '"></i> ' +
            grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
    }

    return div;
};

legend.addTo(map);

    </script>
    <div class = "container", id = 'l'>
      <h1>Weapons Crimes per Precinct</h1>
      <div id = "lines"></div>
  </div>
  <div class = "container", id ="p">
    <h2>Share of Total Weapons Crimes</h2>
    <div id = "pie"></div>
  </div>   
</body>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="lines.js"></script>
<script src="pie.js"></script>
</html>